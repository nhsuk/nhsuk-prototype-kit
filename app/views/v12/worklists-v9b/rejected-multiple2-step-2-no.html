{% extends "layout-v2.html" %}

{% block pageScripts %}
<script>
  $(".char-textarea").on("keyup", function(event) {
    checkTextAreaMaxLength(this, event);
  });

  function checkTextAreaMaxLength(textBox, e) {

    var maxLength = parseInt($(textBox).data("length"));


    if (!checkSpecialKeys(e)) {
      if (textBox.value.length > maxLength - 1) textBox.value = textBox.value.substring(0, maxLength);
    }
    $(".char-count").html(maxLength - textBox.value.length);

    return true;
  }

  function checkSpecialKeys(e) {
    if (e.keyCode != 8 && e.keyCode != 46 && e.keyCode != 37 && e.keyCode != 38 && e.keyCode != 39 && e.keyCode != 40)
      return false;
    else
      return true;
  }
</script>

{% endblock %}

{% block pageTitle %}
NHS Cervical screening management system
{% endblock %}

{% block header %}
{% include '../components/header.html' %}
{% endblock %}

{% block content %}
<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">

    {{ backLink({
      "href": "manc-rejected",
      "text": "Go back to rejected results"
    }) }}

  </div>
</div>

 <h1 class="nhsuk-heading-l nhsuk-u-padding-top-2">Review test result with multiple errors</h1>

<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-three-quarters">
    <h3 class="nhsuk-inset-text nhsuk-comment-container-bullet nhsuk-inset-text__screening nhsuk-inset-text__screening--success">
      <div class="nhsuk-panel"> <strong>This test result has multiple errors.</strong> 
      <p>
        <ul>
          <li> Invalid test date </li>
          <li> Invalid result code </li>
          <li> Duplicate slide number </li>
        </ul>

       <p><span class="date" style="color:	#4c6272">Time recieved: 20 May 2021, 09:30am </span></p>
      </div>
    </h3>
 </div>
</div>


  

<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-one-half">
    <div class="nhsuk-panel-with-label">
      <class="nhsuk-panel-with-label__label">
      {% include '../components/patient-result-4.html' %} 

      <h2 class="nhsuk-heading-m">Rejected result due to multiple errors
      

                <div class="nhsuk-hint" id="example-hints-1-item-hint">
                 Time received: 20 May 2021, 09:30am
                </div><h2>
      

      <dl class="nhsuk-summary-list nhsuk-u-padding-top-3 ">
        

        <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">National code</dt>
              <dd class="nhsuk-summary-list__value">12345</dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">Health authority</dt>
              <dd class="nhsuk-summary-list__value">-</dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">Sender code</dt>
              <dd class="nhsuk-summary-list__value">131290</dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">Slide number</dt>
              <dd class="nhsuk-summary-list__value"><span class="highlight">70406000</span></dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">Test date</dt>
              <dd class="nhsuk-summary-list__value"><span class="highlight">26-Jan-202</span></dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">Test result</dt>
              <dd class="nhsuk-summary-list__value">X0A, Low-grade dyskaryosis</dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">HPV Primary</dt>
              <dd class="nhsuk-summary-list__value"><span class="highlight">-</span></dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">Repeat</dt>
              <dd class="nhsuk-summary-list__value">36 months</dd>
            </div>

      </dl>
       {% include '../components/comments-timeline-manual-match.html' %} 
    </div>
  </div>


  <div class="nhsuk-grid-column-one-half">
    <div class="nhsuk-panel-with-label">
      <class="nhsuk-panel-with-label__label">
      {% include '../components/patient-result-4.html' %} 


      <h2 class="nhsuk-heading-m"> Current result in patient's records
      
                <div class="nhsuk-hint" id="example-hints-1-item-hint">
                 Time received: 03 May 2021, 10:29am
                </div><h2>
     

      <dl class="nhsuk-summary-list nhsuk-u-padding-top-3">

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">National code</dt>
              <dd class="nhsuk-summary-list__value">676567</dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">Health authority</dt>
              <dd class="nhsuk-summary-list__value">-</dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">Sender code</dt>
              <dd class="nhsuk-summary-list__value">131290</dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">Slide number</dt>
              <dd class="nhsuk-summary-list__value"><span class="highlight">70406000</span></dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">Test date</dt>
              <dd class="nhsuk-summary-list__value">26-Jan-2020</dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">Test result</dt>
              <dd class="nhsuk-summary-list__value">X0A, Low-grade dyskaryosis</dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">HPV Primary</dt>
              <dd class="nhsuk-summary-list__value">Yes</dd>
            </div>

            <div class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">Repeat</dt>
              <dd class="nhsuk-summary-list__value">36 months</dd>
            </div>
          </dl>



      </dl>
       {% include '../components/comments-timeline-manual-match.html' %} 
    </div>
  </div>
</div>


<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-two-thirds">



    <div class="nhsuk-grid-row">
      <div class="nhsuk-grid-column-full">

        <form action="rejected-p1" method="post">
          <fieldset class="nhsuk-fieldset">
            <div class="nhsuk-form-group">
              <label class="nhsuk-label nhsuk-label--s nhsuk-u-padding-top-6 nhsuk-u-margin-bottom-2" for="example-heading">
                Enter CRM case number (optional)
              </label>
              <span class="nhsuk-hint" id="example-hint">
                For example, CAS-12345-ABCDE
              </span>
              <input class="nhsuk-input nhsuk-input--width-10" type="text" name="crm" autocomplete="off" value="{{ data.crm }}">
            </div>

            <div class="nhsuk-form-group">
              <label class="nhsuk-label nhsuk-label__strong nhsuk-u-padding-top-1" for="rejcomment1">
                Comments
              </label>
              <span class="nhsuk-hint nhsuk-u-padding-top-2" id="example-hint" for="one-half">
                Please add a comment explaining the action taken.
              </span>
              <textarea class="nhsuk-textarea commentBox char-textarea" id="rejcomment1" value="rejcomment1" name="rejcomment1" rows="5" data-length=200 required></textarea>
            </div>
          </fieldset>

          

          {% set name = "Josie Driver" %}

          {% set commentDate = ("today" | returnDate) %}

          <input type="hidden" id="name" name="name" value="{{commentName}}">

          <input type="hidden" name="date" value={{commentDate}}>

        </form>

        <ul class="nhsuk-comment-container">
          {% if data.rejcomment1 !=null %}

          <li class="nhsuk-panel"><span class="name">{{ name }}</span> <span class="date"><strong>{{data.date}}</strong></span> {{data.rejcomment1}}</li>

          {% endif %}
        </ul>


      </div>
    </div>
    <a href="rejected-p2" class="nhsuk-button nhsuk-button--ers nhsuk-u-margin-top-3 nhsuk-u-margin-right-6">Save and next</a>
    <a href="rejected-delete" class="nhsuk-button nhsuk-button--ers_secondary nhsuk-u-margin-top-3">Delete from list</a>
    <p><a href="manc-rejected">Exit without saving</a></p>

  </div>



</div>
</div>

{% endblock %}

{% block footer %}
<footer role="contentinfo">
  <div class="nhsuk-footer" id="nhsuk-footer">
    <div class="nhsuk-width-container nhsuk-width-container-fluid">
      <p class="nhsuk-footer__copyright">&copy; Crown copyright</p>
    </div>
  </div>
</footer>
{% endblock %}
